(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,a){e.exports=a(67)},43:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(15),o=a.n(c),s=(a(43),a(14)),l=a(4),u=a(3),m=a.n(u),i=a(9),p=a(5),d=Object(r.createContext)(),E=a(19),b=a(1),j=function(e,t){switch(t.type){case"FORM_PROJECT":return Object(b.a)(Object(b.a)({},e),{},{showProjectForm:!0});case"GET_PROJECTS":return Object(b.a)(Object(b.a)({},e),{},{projects:t.payload});case"ADD_PROJECT":return Object(b.a)(Object(b.a)({},e),{},{projects:[].concat(Object(E.a)(e.projects),[t.payload]),showProjectForm:!1,showProjectError:!1});case"FORM_VALIDATE":return Object(b.a)(Object(b.a)({},e),{},{showProjectError:!0});case"CURRENT_PROJECT":return Object(b.a)(Object(b.a)({},e),{},{project:e.projects.filter((function(e){return e._id===t.payload}))});case"DELETE_PROJECT":return Object(b.a)(Object(b.a)({},e),{},{projects:e.projects.filter((function(e){return e._id!==t.payload})),project:null});case"ERROR_PROJECT":return Object(b.a)(Object(b.a)({},e),{},{message:t.payload});default:return e}},f=a(33),O=a.n(f).a.create({baseURL:"https://learn-mern-tasks-server.herokuapp.com/"}),g=function(e){var t=Object(r.useReducer)(j,{projects:[],project:null,showProjectForm:!1,showProjectError:!1,message:null}),a=Object(p.a)(t,2),c=a[0],o=a[1],s=function(){var e=Object(i.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/api/projects");case 3:t=e.sent,o({type:"GET_PROJECTS",payload:t.data.projects}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"ERROR_PROJECT",payload:{msg:"Error de Servidor",category:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/projects",t);case 3:a=e.sent,console.log(a),o({type:"ADD_PROJECT",payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),o({type:"ERROR_PROJECT",payload:{msg:"Error de Servidor",category:"alerta-error"}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.delete("/api/projects/".concat(t));case 3:o({type:"DELETE_PROJECT",payload:t}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),o({type:"ERROR_PROJECT",payload:{msg:"Error de Servidor",category:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(d.Provider,{value:{projects:c.projects,project:c.project,showProjectForm:c.showProjectForm,showProjectError:c.showProjectError,message:c.message,showProjectFormFn:function(){o({type:"FORM_PROJECT"})},showProjectErrorFn:function(){o({type:"FORM_VALIDATE"})},getProjectsFn:s,addProjectFn:l,setCurrentProjectFn:function(e){o({type:"CURRENT_PROJECT",payload:e})},deleteProjectFn:u}},e.children)},v=Object(r.createContext)(),y=function(e,t){switch(t.type){case"GET_PROJECT_TASKS":return Object(b.a)(Object(b.a)({},e),{},{projectTasks:t.payload});case"ADD_TASK":return Object(b.a)(Object(b.a)({},e),{},{projectTasks:[].concat(Object(E.a)(e.projectTasks),[t.payload]),errorTask:!1});case"DELETE_TASK":return Object(b.a)(Object(b.a)({},e),{},{projectTasks:e.projectTasks.filter((function(e){return e._id!==t.payload}))});case"FORM_TASK_VALIDATE":return Object(b.a)(Object(b.a)({},e),{},{errorTask:!0});case"UPDATE_TASK":return Object(b.a)(Object(b.a)({},e),{},{projectTasks:e.projectTasks.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"CURRENT_TASK":return Object(b.a)(Object(b.a)({},e),{},{currentTask:t.payload});case"CLEAN_CURRENT_TASK":return Object(b.a)(Object(b.a)({},e),{},{currentTask:null});default:return e}},h=function(e){var t=Object(r.useReducer)(y,{projectTasks:[],errorTask:!1,currentTask:null}),a=Object(p.a)(t,2),c=a[0],o=a[1],s=function(){var e=Object(i.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/api/tasks",{params:{project:t}});case 3:a=e.sent,o({type:"GET_PROJECT_TASKS",payload:a.data.tasks}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/tasks",t);case 3:o({type:"ADD_TASK",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.put("/api/tasks/".concat(t._id),t);case 3:a=e.sent,o({type:"UPDATE_TASK",payload:a.data.task}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.delete("/api/tasks/".concat(t),{params:{project:a}});case 3:o({type:"DELETE_TASK",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();return n.a.createElement(v.Provider,{value:{projectTasks:c.projectTasks,errorTask:c.errorTask,currentTask:c.currentTask,getProjectTasksFn:s,addTaskFn:l,deleteTaskFn:d,updateTaskFn:u,showTaskErrorFn:function(){o({type:"FORM_TASK_VALIDATE"})},setCurrentTaskFn:function(e){o({type:"CURRENT_TASK",payload:e})},cleanCurrentTaskFn:function(){o({type:"CLEAN_CURRENT_TASK"})}}},e.children)},T=function(e,t){switch(t.type){case"SHOW_ALERT":return{alert:t.payload};case"HIDE_ALERT":return{alert:null};default:return e}},k=Object(r.createContext)(),C=function(e){var t=Object(r.useReducer)(T,{alert:null}),a=Object(p.a)(t,2),c=a[0],o=a[1];return n.a.createElement(k.Provider,{value:{alert:c.alert,showAlertFn:function(e,t){o({type:"SHOW_ALERT",payload:{msg:e,category:t}}),setTimeout((function(){o({type:"HIDE_ALERT"})}),5e3)}}},e.children)},w=Object(r.createContext)(),N=function(e,t){switch(t.type){case"SIGNUP_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("mern_projects_token",t.payload.token),Object(b.a)(Object(b.a)({},e),{},{logged:!0,message:null,loading:!1});case"GET_USER":return Object(b.a)(Object(b.a)({},e),{},{logged:!0,user:t.payload,loading:!1});case"LOGIN_ERROR":case"SIGNUP_ERROR":case"LOGOUT":return localStorage.removeItem("mern_projects_token"),Object(b.a)(Object(b.a)({},e),{},{token:null,user:null,logged:null,message:t.payload,loading:!1});default:return e}},R=function(e){e?O.defaults.headers.common["x-auth-token"]=e:delete O.defaults.headers.common["x-auth-token"]},_=function(e){var t={token:localStorage.getItem("mern_projects_token"),logged:null,loading:!0,user:null,message:null},a=Object(r.useReducer)(N,t),c=Object(p.a)(a,2),o=c[0],s=c[1],l=function(){var e=Object(i.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/users",t);case 3:a=e.sent,s({type:"SIGNUP_SUCCESS",payload:a.data}),u(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},s({type:"SIGNUP_ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("mern_projects_token"))&&R(t),e.prev=2,e.next=5,O.get("/api/auth");case 5:a=e.sent,s({type:"GET_USER",payload:a.data.user}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),s({type:"LOGIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.post("/api/auth",t);case 3:a=e.sent,console.log(a),s({type:"LOGIN_SUCCESS",payload:a.data}),u(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},s({type:"LOGIN_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(w.Provider,{value:{token:o.token,logged:o.logged,loading:o.loading,user:o.user,message:o.message,signUpFn:l,logInFn:d,getLoggedUserFn:u,logOutFn:function(){s({type:"LOGOUT"})}}},e.children)},F=a(35),P=function(e){var t=e.component,a=Object(F.a)(e,["component"]),c=Object(r.useContext)(w),o=c.logged,s=c.loading,u=c.getLoggedUserFn;return Object(r.useEffect)((function(){u()}),[u]),n.a.createElement(l.b,Object.assign({},a,{render:function(e){return o||s?n.a.createElement(t,e):n.a.createElement(l.a,{to:"/"})}}))},x=a(12),S=function(e){var t=Object(r.useContext)(k),a=t.alert,c=t.showAlertFn,o=Object(r.useContext)(w),l=o.message,u=o.logged,m=o.logInFn;Object(r.useEffect)((function(){u&&e.history.push("/projects"),l&&c(l.msg,l.category)}),[l,u,e.history]);var i=Object(r.useState)({email:"",password:""}),d=Object(p.a)(i,2),E=d[0],j=d[1],f=E.email,O=E.password,g=function(e){j(Object(b.a)(Object(b.a)({},E),{},Object(x.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},a?n.a.createElement("div",{className:"alerta ".concat(a.category)},a.msg):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Iniciar Sesi\xf3n"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==f.trim()&&""!==O.trim()||c("Todos los campos son obligatorios","alerta-error"),m({email:f,password:O})}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",onChange:g,value:f})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",onChange:g,value:O})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Iniciar Sesi\xf3n"}))),n.a.createElement(s.b,{to:"/signup",className:"enlace-cuenta"},"Crear una cuenta")))},A=function(e){var t=Object(r.useContext)(k),a=t.alert,c=t.showAlertFn,o=Object(r.useContext)(w),l=o.message,u=o.logged,m=o.signUpFn;Object(r.useEffect)((function(){u&&e.history.push("/projects"),l&&c(l.msg,l.category)}),[l,u,e.history]);var i=Object(r.useState)({username:"",email:"",password:"",passwordconfirm:""}),d=Object(p.a)(i,2),E=d[0],j=d[1],f=E.username,O=E.email,g=E.password,v=E.passwordconfirm,y=function(e){j(Object(b.a)(Object(b.a)({},E),{},Object(x.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},a?n.a.createElement("div",{className:"alerta ".concat(a.category)},a.msg):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Crea tu cuenta"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==f.trim()&&""!==O.trim&&""!==g.trim()&&""!==v.trim()?g.length<6?c("La contrase\xf1a debe tener 6 caracteres como m\xednimo","alerta-error"):g===v?m({name:f,email:O,password:g}):c("Las contrase\xf1as no coinciden","alerta-error"):c("Todos los campos son obligatorios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"username"},"Tu Nombre"),n.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Tu Nombre",onChange:y,value:f})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Tu Email",onChange:y,value:O})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu Password",onChange:y,value:g})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"passwordconfirm"},"Confirma tu Password"),n.a.createElement("input",{type:"password",id:"passwordconfirm",name:"passwordconfirm",placeholder:"Repite tu password",onChange:y,value:v})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Registrarme"}))),n.a.createElement(s.b,{to:"/",className:"enlace-cuenta"},"\xbfYa tienes cuenta? Inicia Sesi\xf3n")))},L=function(){var e=Object(r.useContext)(d),t=e.showProjectForm,a=e.showProjectError,c=e.showProjectFormFn,o=e.addProjectFn,s=e.showProjectErrorFn,l=Object(r.useState)({name:""}),u=Object(p.a)(l,2),m=u[0],i=u[1],E=m.name;return n.a.createElement(r.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(e){c()}},"Nuevo Proyecto"),t?n.a.createElement("form",{className:"formulario-nuevo-proyecto",onSubmit:function(e){e.preventDefault(),""!==E?(o(m),i({name:""})):s()}},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre del Proyecto",name:"name",value:E,onChange:function(e){i(Object(b.a)(Object(b.a)({},m),{},Object(x.a)({},e.target.name,e.target.value)))}}),n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar Proyecto"})):null,a?n.a.createElement("p",{className:"mensaje error"},"El nombre del proyecto es obligatorio"):null)},I=function(e){var t=e.project,a=Object(r.useContext)(d),c=Object(r.useContext)(v),o=a.setCurrentProjectFn,s=c.getProjectTasksFn;return n.a.createElement("li",null,n.a.createElement("button",{type:"button",className:"btn btn-blank",onClick:function(){return e=t._id,o(e),void s(e);var e}},t.name))},U=a(69),D=a(68),J=function(){var e=Object(r.useContext)(d),t=e.projects,a=e.message,c=e.getProjectsFn,o=Object(r.useContext)(k),s=o.alert,l=o.showAlertFn;return Object(r.useEffect)((function(){a&&l(a.msg,a.category),c()}),[a]),0===t.length?n.a.createElement("p",null,"No tienes proyectos. Comienza creando uno."):n.a.createElement("ul",{className:"listado-proyectos"},s?n.a.createElement("div",{className:"alerta ".concat(s.category)},s.msg):null,n.a.createElement(U.a,null,t.map((function(e){return n.a.createElement(D.a,{key:e._id,timeout:200,classNames:"proyecto"},n.a.createElement(I,{project:e}))}))))},G=function(){return n.a.createElement("aside",null,n.a.createElement("h1",null,"MERN",n.a.createElement("span",null,"Tasks")),n.a.createElement(L,null),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",null,"Mis Proyectos"),n.a.createElement(J,null)))},K=function(){var e=Object(r.useContext)(w),t=e.user,a=e.getLoggedUserFn,c=e.logOutFn;return Object(r.useEffect)((function(){a()}),[]),n.a.createElement("header",{className:"app-header"},t?n.a.createElement("p",{className:"nombre-usuario"},"Hola ",n.a.createElement("span",null,t.name)):null,n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"btn btn-blank cerrar-sesion",onClick:function(){return c()}},"Cerrar Sesi\xf3n")))},M=function(){var e=Object(r.useContext)(d),t=Object(r.useContext)(v),a=e.project,c=t.errorTask,o=t.currentTask,s=t.addTaskFn,l=t.updateTaskFn,u=t.showTaskErrorFn,m=t.getProjectTasksFn,i=t.cleanCurrentTaskFn,E=Object(r.useState)({name:""}),j=Object(p.a)(E,2),f=j[0],O=j[1],g=f.name;if(Object(r.useEffect)((function(){O(null!==o?o:{name:""})}),[o]),!a)return null;var y=Object(p.a)(a,1)[0];return n.a.createElement("div",{className:"formulario"},n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==g.trim()?(null===o?(f.project=y._id,f.status=!1,s(f)):(l(f),i()),m(y.id),O({name:""})):u()}},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"El nombre de tu tarea aqu\xed",name:"name",value:g,onChange:function(e){O(Object(b.a)(Object(b.a)({},f),{},Object(x.a)({},e.target.name,e.target.value)))}})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:o?"Editar Tarea":"Agregar Tarea"}))),c?n.a.createElement("p",{className:"mensaje error"},"El nombre de la tarea es obligatorio"):null)},H=function(e){var t=e.task,a=Object(r.useContext)(d).project,c=Object(p.a)(a,1)[0],o=Object(r.useContext)(v),s=o.getProjectTasksFn,l=o.deleteTaskFn,u=o.updateTaskFn,m=o.setCurrentTaskFn,i=t.name,E=t.completed,b=function(e){e.completed?e.completed=!1:e.completed=!0,u(e)};return n.a.createElement("li",{className:"tarea sombra"},n.a.createElement("p",null,i),n.a.createElement("div",{className:"estado"},E?n.a.createElement("button",{type:"button",className:"completo",onClick:function(){return b(t)}},"Completa"):n.a.createElement("button",{type:"button",className:"incompleto",onClick:function(){return b(t)}},"Incompleta")),n.a.createElement("div",{className:"acciones"},n.a.createElement("button",{type:"button",className:"btn btn-primario",onClick:function(){return function(e){m(e)}(t)}},"Editar"),n.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){return e=t._id,l(e,c._id),void s(c.id);var e}},"Eliminar")))},V=function(){var e=Object(r.useContext)(d),t=Object(r.useContext)(v),a=e.project,c=e.deleteProjectFn,o=t.projectTasks;if(!a)return n.a.createElement("h2",null,"Selecciona un proyecto");var s=Object(p.a)(a,1)[0];return n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,"Proyecto: ",s.name),n.a.createElement("ul",{className:"listado-tareas"},0===o.length?n.a.createElement("li",{className:"tarea"},n.a.createElement("p",null,"No hay tareas")):n.a.createElement(U.a,null,o.map((function(e){return n.a.createElement(D.a,{key:e.id,timeout:200,classNames:"tarea"},n.a.createElement(H,{key:e.id,task:e}))})))),n.a.createElement("button",{type:"button",className:"btn btn-eliminar",onClick:function(){c(s._id)}},"Eliminar Proyecto \xd7"))},W=function(){var e=Object(r.useContext)(w).getLoggedUserFn;return Object(r.useEffect)((function(){e()}),[]),n.a.createElement("div",{className:"contenedor-app"},n.a.createElement(G,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(K,null),n.a.createElement("main",null,n.a.createElement(M,null),n.a.createElement("div",{className:"contenedor-tareas"},n.a.createElement(V,null)))))},B=localStorage.getItem("mern_projects_token");B&&R(B);var q=function(){return n.a.createElement(g,null,n.a.createElement(h,null,n.a.createElement(C,null,n.a.createElement(_,null,n.a.createElement(s.a,null,n.a.createElement(l.d,null,n.a.createElement(l.b,{exact:!0,path:"/",component:S}),n.a.createElement(l.b,{exact:!0,path:"/signup",component:A}),n.a.createElement(P,{exact:!0,path:"/projects",component:W})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.89485c9f.chunk.js.map